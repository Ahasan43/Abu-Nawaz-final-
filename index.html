<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Abu Nawaz Electronic - Repair Manager</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <h1><span class="logo-dot"></span>Abu Nawaz Electronic</h1>
  <small>Repair Manager • WhatsApp Alerts • Dashboard • Multi-items</small>

  <div class="top-options">
    <button class="top-btn" onclick="scrollToSection('newEntryCard')"><span class="dot"></span>New entry</button>
    <button class="top-btn" onclick="openDashboard()"><span class="dot"></span>Dashboard</button>
    <button class="top-btn" onclick="scrollToSection('searchCard')"><span class="dot"></span>Search</button>
    <button class="top-btn" onclick="scrollToSection('backupCard')"><span class="dot"></span>Backup</button>
    <button class="top-btn" onclick="scrollToSection('entriesCard')"><span class="dot"></span>All items</button>
  </div>
</header>

<main>
  <!-- ADMIN SETTINGS -->
  <section class="card" id="adminCard">
    <h2><span class="bar"></span>Admin settings</h2>
    <div class="row">
      <div class="col-4">
        <label>Admin WhatsApp Number (e.g. 9715XXXXXXXX)</label>
        <input type="text" id="adminWhatsapp" placeholder="9715xxxxxxxx" />
      </div>
      <div class="col-4">
        <label>Admin Reset PIN</label>
        <input type="password" id="adminPin" placeholder="Set a PIN (e.g. 1234)" />
      </div>
      <div class="col-4" style="display:flex; align-items:flex-end; gap:6px;">
        <button class="btn-primary" onclick="saveAdminSettings()">Save</button>
        <button class="btn-danger" onclick="resetAllData()">Reset</button>
        <span id="adminSaved" class="saved-indicator" style="display:none;">
          <span class="saved-dot"></span>Saved
        </span>
      </div>
    </div>
  </section>

  <!-- NEW ENTRY -->
  <section class="card" id="newEntryCard">
    <h2><span class="bar"></span>New repair / item entry</h2>

    <div class="row">
      <div class="col-4">
        <label>Customer name</label>
        <input type="text" id="custName" />
      </div>
      <div class="col-4">
        <label>Customer mobile number</label>
        <input type="text" id="custPhone" placeholder="9715xxxxxxxx or 05xxxxxxx" />
      </div>
      <div class="col-4">
        <label>Item category</label>
        <select id="itemCategory">
          <option value="">Select category</option>
          <option>Accessories</option>
          <option>Home Electronics</option>
          <option>Small Appliances</option>
          <option>Repairable Electronics</option>
          <option>Computer & IT</option>
          <option>Other</option>
        </select>
      </div>

      <div class="col-4">
        <label>Item name</label>
        <input type="text" id="itemName" placeholder="e.g. LED TV, Iron, UPS" />
      </div>
      <div class="col-4">
        <label>Estimated / Final price</label>
        <input type="number" id="itemPrice" min="0" step="0.01" />
      </div>
      <div class="col-4">
        <label>Status</label>
        <select id="itemStatus">
          <option value="in">In repair</option>
          <option value="ready">Ready (Item out)</option>
          <option value="returned">Returned / Delivered</option>
        </select>
      </div>

      <div class="col-6">
        <label>Issue / detail</label>
        <textarea id="itemIssue"></textarea>
      </div>
      <div class="col-6">
        <label>Notes (optional)</label>
        <textarea id="itemNotes"></textarea>
      </div>

      <div class="col-12" style="margin-top:6px; display:flex; gap:8px;">
        <button class="btn-primary" onclick="addEntry()">Add item</button>
        <span id="entrySaved" class="saved-indicator" style="display:none;">
          <span class="saved-dot"></span>Saved
        </span>
      </div>
    </div>
  </section>

  <!-- SEARCH -->
  <section class="card" id="searchCard">
    <h2><span class="bar"></span>Search customer</h2>
    <div class="row">
      <div class="col-4">
        <label>Customer mobile number</label>
        <input type="text" id="searchPhone" placeholder="Enter number..." />
      </div>
      <div class="col-4" style="display:flex; align-items:flex-end; gap:6px;">
        <button class="btn-secondary" onclick="searchCustomer()">Search</button>
        <button class="btn-secondary" onclick="clearSearch()">Clear</button>
      </div>
    </div>
  </section>

  <!-- BACKUP -->
  <section class="card" id="backupCard">
    <h2><span class="bar"></span>Backup & Restore</h2>
    <div class="row">
      <div class="col-4">
        <button class="btn-secondary" onclick="exportData()">Export JSON</button>
      </div>
      <div class="col-4">
        <input type="file" id="importFile" accept=".json" />
      </div>
      <div class="col-4">
        <button class="btn-secondary" onclick="importData()">Import</button>
      </div>
    </div>
  </section>

  <!-- ALL ENTRIES -->
  <section class="card" id="entriesCard">
    <h2><span class="bar"></span>All repair entries</h2>

    <div class="filter-row">
      <button class="filter-btn active" onclick="setFilter('all', this)">All</button>
      <button class="filter-btn" onclick="setFilter('in', this)">In repair</button>
      <button class="filter-btn" onclick="setFilter('ready', this)">Ready</button>
      <button class="filter-btn" onclick="setFilter('returned', this)">Returned</button>
    </div>

    <div style="overflow-x:auto; max-height:320px; margin-top:6px;">
      <table id="entriesTable">
        <thead>
          <tr>
            <th>#</th>
            <th>Date</th>
            <th>Customer</th>
            <th>Phone</th>
            <th>Item</th>
            <th>Category</th>
            <th>Issue</th>
            <th>Price</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

</main>

<!-- Floating Add Button -->
<div class="fab" onclick="scrollToSection('newEntryCard')">
  <span>+</span>
</div>

<!-- CUSTOMER PROFILE BOTTOM SHEET -->
<div id="customerModal" class="modal">
  <div class="modal-header">
    <div class="modal-drag"></div>
    <h3>Customer Profile</h3>
  </div>
  <div class="modal-body" id="customerModalBody"></div>
</div>

<script src="app.js"></script>
<script src="modal.js"></script>

</body>
</html>
